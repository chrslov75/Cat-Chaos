<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no"><title>Cat Chaos Defender</title><meta name="apple-mobile-web-app-capable" content="yes"><style>*{margin:0;padding:0}body{background:#FFE4E1;overflow:hidden;font-family:system-ui}canvas{display:block;width:100vw;height:100vh;background:#F5F5DC}#i{position:fixed;top:10px;left:50%;transform:translateX(-50%);color:#333;font:bold 4.5vw system-ui;text-align:center;z-index:10}</style></head><body><div id="i">Tap cats! Kermit throws glasses!</div><canvas id="c"></canvas><script>
const c=document.getElementById('c'),x=c.getContext('2d'),d=devicePixelRatio;c.width=innerWidth*d;c.height=innerHeight*d;x.scale(d,d);
addEventListener('resize',()=>{c.width=innerWidth*d;c.height=innerHeight*d;x.scale(d,d)});
let s=localStorage.s|0,hs=localStorage.hs|0,l=5,i=[],a=[],p=[],f=0,t=0,v=100,g=1;
const e={o:'üê±',n:'üêà',d:'üêà',c:'üê±',k:'üêà‚Äç‚¨õ'}; // Chester is now 'c' = gray tabby
function n(){i=[];l=5;for(let j=0;j<5;j++)i.push({x:c.width*.7+10+j*40,y:c.height*.65-40,t:Math.random()>.5?'g':'l'})}
function w(){const r='ondck'[Math.floor(Math.random()*5)],k=r==='k',vx=(1.2+Math.random()*.6+(k?1.2:0))*(c.width/800),y=[c.height*.4,c.height*.48,c.height*.55,c.height*.65][Math.floor(Math.random()*4)];a.push({x:-60,y,vx,t:r,s:0,pf:Math.random()*80|0});if(k)play('laugh')}
function lose(){if(l-->0&&i.length)i.splice(Math.random()*i.length|0,1);if(l<=0){g=0;localStorage.s=s;play('break')}}
function play(s){const a=new AudioContext(),o=a.createOscillator(),g=a.createGain();o.type=s==='laugh'?'triangle':s==='break'?'sawtooth':'sine';o.frequency.value=s==='laugh'?120:s==='break'?80:800;g.gain.setValueAtTime(0.3,a.currentTime);g.gain.exponentialRampToValueAtTime(0.01,a.currentTime+0.3);o.connect(g);g.connect(a.destination);o.start();o.stop(a.currentTime+0.3)}
function tap(e){e.preventDefault();if(!g){g=1;s=0;f=t=0;a=p=[];n();w();return}const mx=(e.touches?e.touches[0].clientX:e.clientX)*d,my=(e.touches?e.touches[0].clientY:e.clientY)*d;for(let j=a.length;j--;){const cat=a[j],dx=mx-cat.x*d,dy=my-cat.y*d;if(dx*dx+dy*dy<5000){cat.s=1;cat.vx=-6;s+=10;play('meow');return}}}
c.addEventListener('touchstart',tap,{passive:false});c.addEventListener('click',tap);
function loop(){if(g){f++;t++;v=Math.max(30,100-s/50|0);if(t>v){w();t=0}
for(let j=a.length;j--;){const cat=a[j];cat.x+=cat.vx;if(cat.s){if(cat.x<-100)a.splice(j,1)}else{if(cat.t==='k'){cat.pf++;if(cat.pf>80){p.push({x:cat.x+25,y:cat.y+5,vx:cat.vx+2});cat.pf=0}}if(cat.x>c.width*.7){lose();a.splice(j,1)}}}
for(let j=p.length;j--;){const pr=p[j];pr.x+=pr.vx;if(pr.x>c.width*.7){lose();p.splice(j,1)}}}
x.clearRect(0,0,c.width,c.height);
x.fillStyle='#E0D7C0';x.fillRect(0,0,c.width,c.height*.4);
x.fillStyle='#8B4513';x.fillRect(0,c.height*.85,c.width,c.height*.15);
x.fillStyle='#D2691E';x.fillRect(c.width*.65,c.height*.65,c.width*.25,c.height*.08);
i.forEach(o=>{x.save();x.translate(o.x,o.y);x.scale(1.5,1.5);x.font='40px Arial';x.fillText(o.t==='g'?'Glass':'Lamp',0,20);x.restore()});
a.forEach(cat=>{x.save();x.scale(cat.s?-1.5:1.5,1.5);x.font='60px Arial';x.fillText(e[cat.t],cat.x/(cat.s?-1:1),cat.y);x.restore()});
p.forEach(pr=>{x.save();x.translate(pr.x,pr.y);x.scale(1.3,1.3);x.font='40px Arial';x.fillText('Glass',0,20);x.restore()});
x.fillStyle='#FFF';x.font='bold 48px Arial';x.fillText('Score: '+s,20,60);
for(let j=0;j<l;j++)x.fillText('Heart',c.width*.7+20+j*50,60);
if(s>hs){hs=s;localStorage.hs=hs}
x.fillText('High: '+hs,c.width/2,60);
if(!g){x.fillStyle='rgba(0,0,0,.8)';x.fillRect(0,0,c.width,c.height);x.fillStyle='#FFF';x.font='bold 60px Arial';x.textAlign='center';x.fillText('Game Over!',c.width/2,c.height/2);x.fillText('Score '+s,c.width/2,c.height/2+70);x.fillText('Tap to play again',c.width/2,c.height/2+140)}}
requestAnimationFrame(loop);
n();w();loop();
</script></body></html>